# 大地图生成说明

## 概述
已成功生成了一个填满整个游戏范围的大地图！新的地图包含了丰富的地形特征。

## 地图规模对比

### 旧地图（test_map原始版本）
- **中心点数量**: 约288个
- **覆盖范围**: 990 x 165 像素
- **文件大小**: 5.3 KB
- **行数**: 18行

### 新地图
- **中心点数量**: 4,999个
- **覆盖范围**: 2,970 x 1,485 像素
- **文件大小**: 99 KB
- **完整覆盖**: 整个3000x1500的游戏地图区域

## 地图特征

### 地形类型分布
新地图包含以下地形类型（按权重分配）：

1. **草地** (40%) - 主要的平原区域
2. **雪地** (25%) - 寒冷区域
3. **道路** (10%) - 交通网络
4. **水体** (8%) - 湖泊和河流
5. **山地** (7%) - 障碍区域
6. **森林** (6%) - 植被密集区
7. **沙地** (4%) - 沙漠区域

### 主要地理特征

#### 道路网络
- **东西向主干道**（3条）:
  - Y=750 (宽60) - 中央大道
  - Y=450 (宽50) - 北部道路
  - Y=1100 (宽50) - 南部道路

- **南北向主干道**（3条）:
  - X=600 (宽50)
  - X=1500 (宽60) - 中央纵贯线
  - X=2400 (宽50)

- **对角线道路**（2条）:
  - (300,300) → (2700,1200)
  - (2700,300) → (300,1200)

#### 水体区域
- **湖泊**（3个）:
  - 中心点(500, 500)，半径150
  - 中心点(2200, 1300)，半径200
  - 中心点(1000, 200)，半径100

- **河流系统**:
  - 主河道：从(900, 0)南下至(900, 600)，转向东南至(1100, 900)，再向南至(1100, 1500)
  - 河道宽度：40像素

#### 山脉区域
- **山脉1**: 从(200, 200)延伸至(1200, 800)，宽度80
- **山脉2**: 从(1800, 200)延伸至(2800, 600)，宽度70
- **独立山峰**:
  - (2700, 900)，半径120
  - (400, 1300)，半径100

#### 地形区域中心
- 草地中心： (500, 400) 半径600
- 雪地中心： (1500, 750) 半径800
- 森林中心： (2500, 400) 半径500
- 沙地中心： (1000, 1200) 半径400
- 山地中心： (2200, 1100) 半径450
- 水域中心： (800, 600) 半径350

## 使用方法

### 重新生成地图
如果需要重新生成地图（每次生成都会有所不同，因为使用了随机算法）：

```bash
# 编译（如果修改了代码）
javac -d target/classes -cp "target/classes:/home/ts/.m2/repository/commons-io/commons-io/2.14.0/commons-io-2.14.0.jar" src/main/java/redAlert/mapEditor/RichMapGenerator.java

# 运行生成器
java -cp "target/classes:/home/ts/.m2/repository/commons-io/commons-io/2.14.0/commons-io-2.14.0.jar" redAlert.mapEditor.RichMapGenerator
```

### 在游戏中使用
地图文件已自动保存到 `test_map.text`，这是游戏默认读取的地图文件。直接运行游戏即可使用新地图：

```bash
java -cp "target/classes" redAlert.MainTest
```

## 自定义地图

### 修改地形权重
编辑 `RichMapGenerator.java` 中的 `TERRAIN_WEIGHTS` 配置：

```java
TERRAIN_WEIGHTS.put(TerrainType.GRASS, 40);   // 调整草地比例
TERRAIN_WEIGHTS.put(TerrainType.SNOW, 25);    // 调整雪地比例
// ... 其他地形
```

### 添加新的地形特征
在 `generateRoadNetwork()`、`generateWaterBodies()` 或 `generateMountainRanges()` 方法中添加新的特征。

### 修改地形区域
在 `createTerrainRegions()` 方法中添加或修改地形区域中心。

## 技术细节

### 中心点系统
- 使用菱形网格系统
- 两类中心点交错排列，确保无缝覆盖
- 一类中心点：从(30, 15)开始，X间隔60，Y间隔30
- 二类中心点：从(0, 0)开始，X间隔60，Y间隔30

### 地形生成算法
- 基于区域中心的距离场算法
- 添加随机噪声使地形边缘更自然
- 使用权重随机分配确保地形比例符合设计

## 注意事项
1. 当前所有地形类型都使用雪地瓦片（.sno文件）
2. 要真正显示不同地形，需要在 `TilesSourceCenter.java` 中添加对应的瓦片资源
3. 地图文件大小约99KB，包含4,999个中心点数据
4. 生成过程在普通PC上约需2-5秒

## 文件位置
- 地图生成器：`src/main/java/redAlert/mapEditor/RichMapGenerator.java`
- 地图文件：`test_map.text`
- 中心点类：`src/main/java/redAlert/mapEditor/MapCenterPoint.java`
