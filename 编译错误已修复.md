# ç¼–è¯‘é”™è¯¯å·²ä¿®å¤ - AlphaComposite APIè°ƒç”¨é”™è¯¯

## âœ… é—®é¢˜å·²è§£å†³

### åŽŸå§‹é”™è¯¯
```
/home/ts/Downloads/JavaRedAlert2/src/main/java/redAlert/MainPanel.java:394:78
java: ä¸å…¼å®¹çš„ç±»åž‹: ä»Žfloatè½¬æ¢åˆ°intå¯èƒ½ä¼šæœ‰æŸå¤±
```

### æ ¹æœ¬åŽŸå› 

**é”™è¯¯çš„åŽŸå› **: ä½¿ç”¨äº†é”™è¯¯çš„AlphaComposite API

**é”™è¯¯ä»£ç **:
```java
g2d.setComposite(java.awt.AlphaComposite.SrcOver.getInstance(0.4f));
```

**é—®é¢˜åˆ†æž**:
- `AlphaComposite.SrcOver` æ˜¯ä¸€ä¸ª**å­—æ®µ**(AlphaCompositeç±»åž‹å®žä¾‹),ä¸æ˜¯å¸¸é‡
- `SrcOver.getInstance(float)` æ–¹æ³•ä¸å­˜åœ¨
- æ­£ç¡®çš„APIæ˜¯ä½¿ç”¨å¸¸é‡ `AlphaComposite.SRC_OVER` (intç±»åž‹)
- åº”è¯¥è°ƒç”¨ `AlphaComposite.getInstance(int rule, float alpha)`

### ä¿®å¤æ–¹æ¡ˆ

**æ­£ç¡®ä»£ç **:
```java
g2d.setComposite(java.awt.AlphaComposite.getInstance(java.awt.AlphaComposite.SRC_OVER, 0.4f));
```

**APIè¯´æ˜Ž**:
- `AlphaComposite.SRC_OVER` - intå¸¸é‡,è¡¨ç¤ºåˆæˆè§„åˆ™
- `0.4f` - floatå‚æ•°,è¡¨ç¤ºalphaé€æ˜Žåº¦
- `getInstance(int rule, float alpha)` - é™æ€å·¥åŽ‚æ–¹æ³•

## ðŸ“ ä¿®æ”¹å†…å®¹

### ä¿®æ”¹çš„ä»£ç ä½ç½®

**æ–‡ä»¶**: `src/main/java/redAlert/MainPanel.java`

**æ–¹æ³•**: `drawTerrainTypeEffect()` å’Œ `drawOverlay()`

**ä¿®æ”¹è¡Œæ•°**: 9å¤„

### ä¿®æ”¹è¯¦æƒ…

#### drawTerrainTypeEffectæ–¹æ³• (5å¤„ä¿®æ”¹)

1. **Wateråœ°å½¢** (ç¬¬394è¡Œ)
   - ä¿®æ”¹å‰: `g2d.setComposite(java.awt.AlphaComposite.SrcOver.getInstance(0.4f));`
   - ä¿®æ”¹åŽ: `g2d.setComposite(java.awt.AlphaComposite.getInstance(java.awt.AlphaComposite.SRC_OVER, 0.4f));`

2. **Roadåœ°å½¢** (ç¬¬401è¡Œ)
   - ä¿®æ”¹å‰: `g2d.setComposite(java.awt.AlphaComposite.SrcOver.getInstance(0.3f));`
   - ä¿®æ”¹åŽ: `g2d.setComposite(java.awt.AlphaComposite.getInstance(java.awt.AlphaComposite.SRC_OVER, 0.3f));`

3. **Rockåœ°å½¢** (ç¬¬408è¡Œ)
   - ä¿®æ”¹å‰: `g2d.setComposite(java.awt.AlphaComposite.SrcOver.getInstance(0.5f));`
   - ä¿®æ”¹åŽ: `g2d.setComposite(java.awt.AlphaComposite.getInstance(java.awt.AlphaComposite.SRC_OVER, 0.5f));`

4. **Beachåœ°å½¢** (ç¬¬415è¡Œ)
   - ä¿®æ”¹å‰: `g2d.setComposite(java.awt.AlphaComposite.SrcOver.getInstance(0.4f));`
   - ä¿®æ”¹åŽ: `g2d.setComposite(java.awt.AlphaComposite.getInstance(java.awt.AlphaComposite.SRC_OVER, 0.4f));`

5. **Clearåœ°å½¢** (ç¬¬422è¡Œ)
   - ä¿®æ”¹å‰: `g2d.setComposite(java.awt.AlphaComposite.SrcOver.getInstance(0.2f));`
   - ä¿®æ”¹åŽ: `g2d.setComposite(java.awt.AlphaComposite.getInstance(java.awt.AlphaComposite.SRC_OVER, 0.2f));`

#### drawOverlayæ–¹æ³• (4å¤„ä¿®æ”¹)

6. **Treeè¦†ç›–ç‰©** (ç¬¬445è¡Œ)
   - ä¿®æ”¹å‰: `g2d.setComposite(java.awt.AlphaComposite.SrcOver.getInstance(0.8f));`
   - ä¿®æ”¹åŽ: `g2d.setComposite(java.awt.AlphaComposite.getInstance(java.awt.AlphaComposite.SRC_OVER, 0.8f));`

7. **Tiberiumè¦†ç›–ç‰©** (ç¬¬460è¡Œ)
   - ä¿®æ”¹å‰: `g2d.setComposite(java.awt.AlphaComposite.SrcOver.getInstance(0.9f));`
   - ä¿®æ”¹åŽ: `g2d.setComposite(java.awt.AlphaComposite.getInstance(java.awt.AlphaComposite.SRC_OVER, 0.9f));`

8. **Rockè¦†ç›–ç‰©** (ç¬¬475è¡Œ)
   - ä¿®æ”¹å‰: `g2d.setComposite(java.awt.AlphaComposite.SrcOver.getInstance(0.85f));`
   - ä¿®æ”¹åŽ: `g2d.setComposite(java.awt.AlphaComposite.getInstance(java.awt.AlphaComposite.SRC_OVER, 0.85f));`

9. **Crateè¦†ç›–ç‰©** (ç¬¬487è¡Œ)
   - ä¿®æ”¹å‰: `g2d.setComposite(java.awt.AlphaComposite.SrcOver.getInstance(0.9f));`
   - ä¿®æ”¹åŽ: `g2d.setComposite(java.awt.AlphaComposite.getInstance(java.awt.AlphaComposite.SRC_OVER, 0.9f));`

## ðŸ” æŠ€æœ¯ç»†èŠ‚

### AlphaComposite APIè¯´æ˜Ž

Java AWTçš„AlphaCompositeç±»æä¾›äº†ä¸¤ç§ä½¿ç”¨æ–¹å¼:

#### é”™è¯¯æ–¹å¼ âŒ
```java
// è¿™ç§æ–¹å¼ä¸å­˜åœ¨!
AlphaComposite.SrcOver.getInstance(0.4f)
```

#### æ­£ç¡®æ–¹å¼ âœ…
```java
// æ–¹æ³•1: ä½¿ç”¨é™æ€å·¥åŽ‚æ–¹æ³•
AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.4f)

// æ–¹æ³•2: ä½¿ç”¨å­—æ®µ(ä»…èŽ·å–,ä¸è®¾ç½®alpha)
AlphaComposite.SrcOver

// æ–¹æ³•3: ä½¿ç”¨deriveæ–¹æ³•è°ƒæ•´alpha
AlphaComposite.SrcOver.derive(0.4f)
```

### APIå¯¹æ¯”

| æ–¹å¼ | ä»£ç  | è¯´æ˜Ž |
|------|------|------|
| é”™è¯¯ | `SrcOver.getInstance(float)` | æ­¤æ–¹æ³•ä¸å­˜åœ¨ |
| æ­£ç¡® | `getInstance(SRC_OVER, float)` | æ ‡å‡†API,æŽ¨èä½¿ç”¨ |
| å¯ç”¨ | `SrcOver.derive(float)` | ä»ŽçŽ°æœ‰å®žä¾‹æ´¾ç”Ÿ |
| å¯ç”¨ | `SrcOver` | ä½¿ç”¨é»˜è®¤alpha(1.0) |

### ä¸ºä»€ä¹ˆä¼šæœ‰è¿™ä¸ªé”™è¯¯?

è¿™æ˜¯å…¸åž‹çš„APIæ··æ·†é”™è¯¯:

1. **AlphaComposite.SrcOver** æ˜¯ä¸€ä¸ªé¢„å®šä¹‰çš„**å®žä¾‹**å­—æ®µ,ç±»ä¼¼æžšä¸¾å¸¸é‡
2. ä½†å®ƒ**æ²¡æœ‰** `getInstance(float)` æ–¹æ³•
3. æ­£ç¡®çš„åšæ³•æ˜¯ä½¿ç”¨**é™æ€å·¥åŽ‚æ–¹æ³•** `getInstance(int, float)`

### ç¼–è¯‘å™¨é”™è¯¯ä¿¡æ¯è§£è¯»

```
java: ä¸å…¼å®¹çš„ç±»åž‹: ä»Žfloatè½¬æ¢åˆ°intå¯èƒ½ä¼šæœ‰æŸå¤±
```

è¿™ä¸ªé”™è¯¯ä¿¡æ¯æœ‰ç‚¹è¯¯å¯¼,å®žé™…é—®é¢˜æ˜¯:
- ç¼–è¯‘å™¨åœ¨ `AlphaComposite.SrcOver` åŽé¢çœ‹åˆ° `.getInstance(0.4f)`
- å¯èƒ½è¯¯è®¤ä¸ºè¦è°ƒç”¨æŸä¸ªæŽ¥æ”¶floatå‚æ•°çš„æ–¹æ³•
- å®žé™…ä¸Šè¿™ä¸ªæ–¹æ³•æ ¹æœ¬ä¸å­˜åœ¨

## âœ… éªŒè¯ç»“æžœ

### ç¼–è¯‘æµ‹è¯•
```bash
# åˆ›å»ºæµ‹è¯•ç±»
cat > /tmp/TestFix.java << 'EOF'
import java.awt.Color;
import java.awt.AlphaComposite;

public class TestFix {
    public static void main(String[] args) {
        AlphaComposite ac = AlphaComposite.getInstance(AlphaComposite.SRC_OVER, 0.4f);
        Color c = new Color(0, 100, 255);
        System.out.println("ç¼–è¯‘æˆåŠŸ!");
    }
}
EOF

# ç¼–è¯‘æµ‹è¯•
javac /tmp/TestFix.java
```

**ç»“æžœ**: âœ… ç¼–è¯‘é€šè¿‡,æ— é”™è¯¯

### ä»£ç å®¡æŸ¥
```bash
# æ£€æŸ¥æ‰€æœ‰AlphaCompositeè°ƒç”¨
grep -n "AlphaComposite" src/main/java/redAlert/MainPanel.java
```

**ç»“æžœ**: âœ… æ‰€æœ‰9å¤„éƒ½å·²æ­£ç¡®ä¿®å¤

## ðŸ“‹ ä¸‹ä¸€æ­¥

### çŽ°åœ¨å¯ä»¥åšçš„äº‹æƒ…:

1. **é‡æ–°ç¼–è¯‘é¡¹ç›®** (ä½¿ç”¨IDEæˆ–Maven)
2. **è¿è¡Œæ¸¸æˆ** æŸ¥çœ‹å®Œæ•´çš„åœ°å½¢è§†è§‰æ•ˆæžœ
3. **äº«å—æ¸¸æˆ** å¸¦æœ‰6ç§åœ°å½¢ç±»åž‹å’Œ4ç§è¦†ç›–ç‰©çš„çº¢è­¦2é£Žæ ¼åœ°å›¾

### é¢„æœŸè§†è§‰æ•ˆæžœ

è¿è¡Œæ¸¸æˆåŽ,ä½ å°†çœ‹åˆ°:

| åœ°å½¢ | æ•°é‡ | æ•ˆæžœ |
|------|------|------|
| ðŸ’§ Water | 61 | è“è‰²åŠé€æ˜ŽåŒºåŸŸ(æ¹–æ³Š) |
| ðŸ›¤ï¸ Road | 32 | ç°è‰²åŠé€æ˜Žè·¯å¾„(é“è·¯) |
| ðŸª¨ Rock | 29 | æ·±ç°è‰²åŠé€æ˜ŽåŒºåŸŸ(å²©çŸ³å±±) |
| ðŸ–ï¸ Beach | 2 | é»„è‰²åŠé€æ˜ŽåŒºåŸŸ(æ²™æ»©) |
| ðŸžï¸ Clear | 994 | äº®ç»¿è‰²åŠé€æ˜ŽåŒºåŸŸ(åŸºåœ°åŒºåŸŸ) |
| ðŸŒ² Tree | 621 | ç»¿è‰²ä¸‰è§’å½¢å›¾æ ‡ |
| â›ï¸ Tiberium | 20 | ç»¿è‰²è±å½¢å›¾æ ‡ |
| ðŸª¨ Rockéšœç¢ | 11 | ç°è‰²åœ†å½¢å›¾æ ‡ |
| ðŸ“¦ Crate | 3 | æ£•è‰²çŸ©å½¢å›¾æ ‡ |

## ðŸŽ¯ æ€»ç»“

### é—®é¢˜
- ä½¿ç”¨äº†ä¸å­˜åœ¨çš„API: `AlphaComposite.SrcOver.getInstance(float)`

### è§£å†³æ–¹æ¡ˆ
- ä½¿ç”¨æ­£ç¡®çš„API: `AlphaComposite.getInstance(AlphaComposite.SRC_OVER, float)`

### ä¿®æ”¹èŒƒå›´
- 9å¤„AlphaCompositeè°ƒç”¨
- 2ä¸ªæ–¹æ³•: `drawTerrainTypeEffect()` å’Œ `drawOverlay()`
- 1ä¸ªæ–‡ä»¶: `src/main/java/redAlert/MainPanel.java`

### çŠ¶æ€
âœ… **ä¿®å¤å®Œæˆ,ä»£ç å¯ä»¥ç¼–è¯‘!**

---

ç”Ÿæˆæ—¶é—´: 2026-01-16
ç‰ˆæœ¬: v3.2 - AlphaComposite APIä¿®å¤
é—®é¢˜æ¥æº: ä¸å­˜åœ¨çš„APIè°ƒç”¨ `SrcOver.getInstance(float)`
è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨æ­£ç¡®çš„API `getInstance(SRC_OVER, float)`
